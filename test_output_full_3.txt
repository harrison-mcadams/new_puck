Testing analyze.players for Philadelphia Flyers...
players: Starting analysis. Scope=season, Team=None, Condition={'game_state': ['5v5'], 'is_net_empty': [0]}
players: Loading data for season 20252026...
Loaded season dataframe from data/20252026/20252026_df.csv -> shape=(90007, 22)
players: Ensuring xG predictions...
players: Loading league baseline...
league: loaded baseline from static/20252026_league_baseline.npy and static/20252026_league_baseline.json
players: Analyzing 1 players...
xgs_map: using provided DataFrame (in-memory) -> rows= 5260
INFO:root:get_shifts: response for 2025020094 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020094 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020081 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020081 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025010083
INFO:root:get_shifts: response for 2025020066 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020066 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: removed 3 zero-length shifts for game 2025020012
INFO:root:get_shifts: removed 8 zero-length shifts for game 2025010094
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025020030
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025020044
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025010083
INFO:root:get_shifts: removed 3 zero-length shifts for game 2025020012
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025020030
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025020044
INFO:root:get_shifts: removed 8 zero-length shifts for game 2025010094
INFO:root:get_shifts: response for 2025020150 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020150 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020127 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020127 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020170 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020170 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: removed 3 zero-length shifts for game 2025020112
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025020188
INFO:root:get_shifts: removed 3 zero-length shifts for game 2025020112
INFO:root:get_shifts: response for 2025020094 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020094 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: removed 7 zero-length shifts for game 2025020188
INFO:root:get_shifts: removed 3 zero-length shifts for game 2025020196
INFO:root:get_shifts: response for 2025020066 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020066 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: removed 9 zero-length shifts for game 2025020204
INFO:root:get_shifts: response for 2025020081 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020081 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: removed 3 zero-length shifts for game 2025020196
INFO:root:get_shifts: removed 9 zero-length shifts for game 2025020204
INFO:root:get_shifts: response for 2025020150 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020150 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020223 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020223 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020170 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020170 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020232 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020232 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020127 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020127 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020232 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020232 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020223 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020223 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020094 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020094 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020066 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020066 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020081 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020081 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020170 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020170 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020150 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020150 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020127 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020127 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020232 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020232 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020223 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020223 contains no candidate shifts; attempt 3/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020066 from all endpoints
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020094 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020066 from NHL HTML fallback
INFO:root:get_shifts: obtained shifts for 2025020094 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020066 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020066 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020094 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020094 contains no candidate shifts; attempt 1/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020170 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020170 from NHL HTML fallback
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020081 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020081 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020170 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020170 contains no candidate shifts; attempt 1/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020150 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020150 from NHL HTML fallback
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020127 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020127 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020081 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020081 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020150 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020150 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020127 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020127 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020066 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020066 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020094 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020094 contains no candidate shifts; attempt 2/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020232 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020232 from NHL HTML fallback
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020223 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020223 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020232 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020232 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020170 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020170 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020081 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020081 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020223 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020223 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020150 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020150 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020127 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020127 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020232 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020232 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020223 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020223 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020066 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020066 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020094 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020094 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020170 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020170 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020081 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020081 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020150 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020150 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020127 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020127 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020223 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020223 contains no candidate shifts; attempt 3/3
INFO:root:get_shifts: response for 2025020232 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020232 contains no candidate shifts; attempt 3/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020094 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020094 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020266 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020266 contains no candidate shifts; attempt 1/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020066 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020066 from NHL HTML fallback
INFO:root:get_shifts: removed 11 zero-length shifts for game 2025020280
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020170 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020170 from NHL HTML fallback
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020081 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020081 from NHL HTML fallback
INFO:root:get_shifts: removed 6 zero-length shifts for game 2025020293
INFO:root:get_shifts: removed 11 zero-length shifts for game 2025020280
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020150 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020150 from NHL HTML fallback
INFO:root:get_shifts: removed 6 zero-length shifts for game 2025020293
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020127 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020127 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020266 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020266 contains no candidate shifts; attempt 2/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020232 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020232 from NHL HTML fallback
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020223 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020223 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020266 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020266 contains no candidate shifts; attempt 3/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020266 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020266 from NHL HTML fallback
INFO:root:get_shifts: response for 2025020266 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020266 contains no candidate shifts; attempt 1/3
INFO:root:get_shifts: response for 2025020266 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020266 contains no candidate shifts; attempt 2/3
INFO:root:get_shifts: response for 2025020266 at https://api.nhle.com/stats/rest/en/shiftcharts?cayenneExp=gameId=2025020266 contains no candidate shifts; attempt 3/3
WARNING:root:get_shifts: failed to retrieve usable shifts payload for 2025020266 from all endpoints
INFO:root:get_shifts: obtained shifts for 2025020266 from NHL HTML fallback
/Users/harrisonmcadams/Desktop/new_puck/plot.py:398: UserWarning:

You passed a edgecolor/edgecolors ('none') for an unfilled marker ('x').  Matplotlib is ignoring the edgecolor in favor of the facecolor.  This behavior may change in the future.

/Users/harrisonmcadams/Desktop/new_puck/plot.py:403: UserWarning:

You passed a edgecolor/edgecolors ('none') for an unfilled marker ('x').  Matplotlib is ignoring the edgecolor in favor of the facecolor.  This behavior may change in the future.

_apply_intervals: intervals per_game count=20
_apply_intervals: game 2025010083 rows_in_game=210 parsed_intervals=17 team_for_game=PHI
_apply_intervals: game 2025010083 df_game_rows=210
_apply_intervals: game 2025020012 rows_in_game=275 parsed_intervals=16 team_for_game=PHI
_apply_intervals: game 2025020012 df_game_rows=275
_apply_intervals: game 2025020030 rows_in_game=315 parsed_intervals=20 team_for_game=PHI
_apply_intervals: game 2025020030 df_game_rows=315
_apply_intervals: game 2025020044 rows_in_game=248 parsed_intervals=14 team_for_game=PHI
_apply_intervals: game 2025020044 df_game_rows=248
_apply_intervals: game 2025010094 rows_in_game=272 parsed_intervals=19 team_for_game=PHI
_apply_intervals: game 2025010094 df_game_rows=272
_apply_intervals: game 2025020112 rows_in_game=240 parsed_intervals=20 team_for_game=PHI
_apply_intervals: game 2025020112 df_game_rows=240
_apply_intervals: game 2025020188 rows_in_game=284 parsed_intervals=16 team_for_game=PHI
_apply_intervals: game 2025020188 df_game_rows=284
_apply_intervals: game 2025020196 rows_in_game=260 parsed_intervals=20 team_for_game=PHI
_apply_intervals: game 2025020196 df_game_rows=260
_apply_intervals: game 2025020204 rows_in_game=299 parsed_intervals=19 team_for_game=PHI
_apply_intervals: game 2025020204 df_game_rows=299
_apply_intervals: game 2025020094 rows_in_game=280 parsed_intervals=15 team_for_game=PHI
_apply_intervals: game 2025020094 df_game_rows=280
_apply_intervals: game 2025020066 rows_in_game=203 parsed_intervals=18 team_for_game=PHI
_apply_intervals: game 2025020066 df_game_rows=203
_apply_intervals: game 2025020170 rows_in_game=262 parsed_intervals=19 team_for_game=PHI
_apply_intervals: game 2025020170 df_game_rows=262
_apply_intervals: game 2025020081 rows_in_game=256 parsed_intervals=20 team_for_game=PHI
_apply_intervals: game 2025020081 df_game_rows=256
_apply_intervals: game 2025020280 rows_in_game=235 parsed_intervals=23 team_for_game=PHI
_apply_intervals: game 2025020280 df_game_rows=235
_apply_intervals: game 2025020150 rows_in_game=290 parsed_intervals=17 team_for_game=PHI
_apply_intervals: game 2025020150 df_game_rows=290
_apply_intervals: game 2025020293 rows_in_game=255 parsed_intervals=21 team_for_game=PHI
_apply_intervals: game 2025020293 df_game_rows=255
_apply_intervals: game 2025020127 rows_in_game=293 parsed_intervals=19 team_for_game=PHI
_apply_intervals: game 2025020127 df_game_rows=293
_apply_intervals: game 2025020232 rows_in_game=251 parsed_intervals=18 team_for_game=PHI
_apply_intervals: game 2025020232 df_game_rows=251
_apply_intervals: game 2025020223 rows_in_game=284 parsed_intervals=20 team_for_game=PHI
_apply_intervals: game 2025020223 df_game_rows=284
_apply_intervals: game 2025020266 rows_in_game=248 parsed_intervals=21 team_for_game=PHI
_apply_intervals: game 2025020266 df_game_rows=248
Filtered season dataframe to 1103 events by condition {'game_state': ['5v5'], 'is_net_empty': [0], 'player_id': 8480015, 'team': 'PHI'} team='PHI'
DEBUG: xgs_map df_filtered shape=(1103, 25), unique_teams=[ 2  4 13 12  1  9 10 20  8 55 52 18 30 19  5 25 22]
DEBUG: Inferred total_seconds_used=71340.0 from 20 games (range=3567.0)
DEBUG: compute_xg_heatmap role=other team=PHI mask_sum=237 amps_sum=10.110165497629286
DEBUG: Inferred total_seconds_used=71340.0 from 20 games (range=3567.0)
Saved plot to static/test_flyers_players/PHI_8480015_map.png
DEBUG: Relative Map Inputs for 8480015:
  Seconds: 15926.0
  Team Map Sum: 11.0031, Max: 0.0165
  Other Map Sum: 0.0000, Max: 0.0000
  League Map Sum: 2.5595, Max: 0.0043
players: Generated relative map for 8480015 at static/test_flyers_players/PHI_8480015_relative.png
players: Saved stats to static/test_flyers_players/player_stats.csv
players: Saved scatter plot to static/test_flyers_players/player_scatter.png
players: Analysis complete.
analyze.players completed successfully.
SUCCESS: Generated 1 player maps and summary stats.
